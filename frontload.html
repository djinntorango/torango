<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>401(k) Frontloading Strategy</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
            margin: 20px 0;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.2em;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .strategy-selector {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .strategy-selector h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-container {
            margin: 15px 0;
        }
        
        .input-container label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .input-container input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .input-container input[type="number"]:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .input-container select {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 16px;
            background: white;
            box-sizing: border-box;
        }
        
        .slider-container {
            margin: 20px 0;
        }
        
        .slider-container label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            margin-bottom: 10px;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }
        
        .slider-value {
            text-align: center;
            font-size: 1.2em;
            color: #3498db;
            font-weight: bold;
        }
        
        .strategy-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .strategy-card {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .strategy-card.frontload {
            border-color: #27ae60;
            background: #d5f4e6;
        }
        
        .strategy-card.uniform {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .strategy-card h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .big-number {
            font-size: 2em;
            font-weight: bold;
            color: #27ae60;
            margin: 10px 0;
        }
        
        .advantage {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            color: #155724;
        }
        
        .bonus-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            color: #856404;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        th {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            font-size: 0.9em;
        }
        
        td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
            font-size: 0.85em;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .frontload-phase {
            background-color: #d5f4e6 !important;
        }
        
        .maintenance-phase {
            background-color: #fff3cd !important;
        }
        
        .bonus-period {
            background-color: #e8f5e8 !important;
            border-left: 4px solid #27ae60;
        }
        
        .notes {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
        }
        
        .notes h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .notes ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .notes li {
            margin: 8px 0;
            line-height: 1.5;
        }
        
        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .highlight h4 {
            margin-top: 0;
            color: #856404;
        }
        
        .warning {
            background: #f8d7da;
            padding: 15px;
            border-left: 4px solid #dc3545;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .warning h4 {
            margin-top: 0;
            color: #721c24;
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-box h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 0.9em;
        }
        
        .stat-box .value {
            font-size: 1.3em;
            font-weight: bold;
            color: #3498db;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            table {
                font-size: 0.8em;
            }
            
            th, td {
                padding: 8px 4px;
            }
            
            .strategy-cards {
                grid-template-columns: 1fr;
            }
            
            .summary-stats {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>401(k) Frontloading Strategy</h1>
        <p class="subtitle">Maximize time in market while preserving employer match</p>
        
        <div class="strategy-selector">
            <h3>Personal Information</h3>
            <div class="input-grid">
                <div class="input-container">
                    <label for="salary">Annual Salary:</label>
                    <input type="number" id="salary" value="96600" min="30000" max="500000" step="1000">
                </div>
                <div class="input-container">
                    <label for="bonus">Annual Bonus (optional):</label>
                    <input type="number" id="bonus" value="0" min="0" max="100000" step="1000">
                </div>
                <div class="input-container">
                    <label for="bonusPeriod">Bonus Pay Period:</label>
                    <select id="bonusPeriod">
                        <option value="0">No Bonus</option>
                        <option value="1">Pay Period 1 (January)</option>
                        <option value="2">Pay Period 2 (January)</option>
                        <option value="3">Pay Period 3 (February)</option>
                        <option value="4">Pay Period 4 (February)</option>
                        <option value="5">Pay Period 5 (March)</option>
                        <option value="6">Pay Period 6 (March)</option>
                        <option value="7">Pay Period 7 (April)</option>
                        <option value="8">Pay Period 8 (April)</option>
                        <option value="9">Pay Period 9 (May)</option>
                        <option value="10">Pay Period 10 (May)</option>
                        <option value="11">Pay Period 11 (June)</option>
                        <option value="12">Pay Period 12 (June)</option>
                        <option value="13">Pay Period 13 (July)</option>
                        <option value="14">Pay Period 14 (July)</option>
                        <option value="15">Pay Period 15 (August)</option>
                        <option value="16">Pay Period 16 (August)</option>
                        <option value="17">Pay Period 17 (September)</option>
                        <option value="18">Pay Period 18 (September)</option>
                        <option value="19">Pay Period 19 (October)</option>
                        <option value="20">Pay Period 20 (October)</option>
                        <option value="21">Pay Period 21 (November)</option>
                        <option value="22">Pay Period 22 (November)</option>
                        <option value="23">Pay Period 23 (December)</option>
                        <option value="24">Pay Period 24 (December)</option>
                        <option value="25">Pay Period 25 (December)</option>
                        <option value="26">Pay Period 26 (December)</option>
                    </select>
                </div>
                <div class="input-container">
                    <label for="employerMatch">Employer Match Rate:</label>
                    <input type="number" id="employerMatch" value="6" min="0" max="10" step="0.1">
                    <small style="color: #666;">% of salary matched</small>
                </div>
            </div>
            
            <h3>Frontloading Strategy</h3>
            <div class="slider-container">
                <label for="frontloadPercent">Frontloading Contribution Rate:</label>
                <input type="range" id="frontloadPercent" class="slider" min="15" max="100" value="25" step="1">
                <div class="slider-value" id="frontloadValue">25%</div>
            </div>
            <div class="slider-container">
                <label for="targetContribution">Annual Employee Contribution Target:</label>
                <input type="range" id="targetContribution" class="slider" min="5000" max="23500" value="23500" step="500">
                <div class="slider-value" id="targetValue">$23,500</div>
            </div>
        </div>
        
        <div class="summary-stats">
            <div class="stat-box">
                <h4>Biweekly Gross Pay</h4>
                <div class="value" id="biweeklyGross">$3,715</div>
            </div>
            <div class="stat-box">
                <h4>Annual Employer Match</h4>
                <div class="value" id="annualMatch">$5,796</div>
            </div>
            <div class="stat-box">
                <h4>Total Annual Income</h4>
                <div class="value" id="totalIncome">$96,600</div>
            </div>
            <div class="stat-box">
                <h4>Bonus Timing</h4>
                <div class="value" id="bonusDisplay">None</div>
            </div>
        </div>
        
        <div class="strategy-cards">
            <div class="strategy-card frontload">
                <h3>Frontloading Strategy</h3>
                <div class="big-number" id="frontloadAmount">$23,500</div>
                <p>Total Annual Contribution</p>
                <div class="advantage">
                    <strong>Advantage:</strong> More time in market for compound growth
                </div>
                <div id="frontloadBreakdown"></div>
            </div>
            
            <div class="strategy-card uniform">
                <h3>Uniform Strategy</h3>
                <div class="big-number" id="uniformAmount">$23,500</div>
                <p>Total Annual Contribution</p>
                <div class="advantage">
                    <strong>Advantage:</strong> Consistent dollar-cost averaging
                </div>
                <p id="uniformRate">24.3% every paycheck</p>
            </div>
        </div>
        
        <div class="highlight">
            <h4>Time Value Advantage</h4>
            <p>By frontloading, you get your money invested earlier in the year. Assuming a 7% annual return, the frontloading strategy could generate an extra <strong id="timeValueBenefit">$500-800</strong> annually compared to uniform contributions.</p>
        </div>
        
        <div class="bonus-info" id="bonusInfo" style="display: none;">
            <h4>Bonus Impact</h4>
            <p>Your bonus will be included in the 401(k) calculation for the selected pay period. This can help you reach your contribution goals faster or provide additional flexibility in your strategy.</p>
        </div>
        
        <div class="warning" id="extremeWarning" style="display: none;">
            <h4>High Contribution Rate Warning</h4>
            <p>At very high contribution rates (75%+), your take-home pay will be significantly reduced. This strategy may complete your 401(k) contribution in just a few months, leaving you with very low income during the frontloading period. Make sure you have adequate emergency funds and can manage your cash flow.</p>
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Pay Period</th>
                    <th>Month</th>
                    <th>Gross Pay</th>
                    <th>Contribution %</th>
                    <th>Your Contribution</th>
                    <th>Employer Match</th>
                    <th>Total to 401k</th>
                    <th>Take-Home Pay</th>
                    <th>Employee Cumulative</th>
                    <th>Total Cumulative</th>
                </tr>
            </thead>
            <tbody id="tableBody">
            </tbody>
        </table>
        
        <div class="notes">
            <h3>Key Strategy Points:</h3>
            <ul>
                <li><strong>Frontload Phase:</strong> High contribution rate early in year to maximize time in market</li>
                <li><strong>Maintenance Phase:</strong> Switch to match rate to preserve full employer match</li>
                <li><strong>Employer Match:</strong> You still get the full annual match based on your salary</li>
                <li><strong>Time Value:</strong> Earlier investments have more time to compound</li>
                <li><strong>Flexibility:</strong> You can adjust your contribution rate anytime through payroll</li>
                <li><strong>Risk:</strong> Higher early take-home pay reduction, but lower later in year</li>
                <li><strong>Bonus Integration:</strong> Bonuses can accelerate your contribution timeline</li>
                <li><strong>Extreme Frontloading:</strong> At 100% contribution, you complete your 401(k) in ~6 pay periods but have $0 take-home during that time</li>
            </ul>
        </div>
    </div>

    <script>
        const maxContribution = 23500;
        const taxRate = 0.2965;
        const hsaContribution = 40;
        
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        
        function calculateTakeHome(grossPay, contributionAmount) {
            // Simplified take-home calculation
            // Take-home = Gross - Contribution - Taxes on (Gross - Contribution) - HSA
            const taxableIncome = grossPay - contributionAmount - hsaContribution;
            const taxes = Math.max(0, taxableIncome * taxRate);
            return Math.max(0, grossPay - contributionAmount - taxes - hsaContribution);
        }
        
        function updateStrategy() {
            const salary = parseInt(document.getElementById('salary').value);
            const bonus = parseInt(document.getElementById('bonus').value) || 0;
            const bonusPeriod = parseInt(document.getElementById('bonusPeriod').value);
            const employerMatchRate = parseFloat(document.getElementById('employerMatch').value) / 100;
            const frontloadPercent = document.getElementById('frontloadPercent').value / 100;
            const targetContribution = parseInt(document.getElementById('targetContribution').value);
            
            const biweeklyGross = salary / 26;
            const employerMatchAmount = salary * employerMatchRate;
            const totalIncome = salary + bonus;
            
            // Update display values
            document.getElementById('frontloadValue').textContent = `${frontloadPercent * 100}%`;
            document.getElementById('targetValue').textContent = `$${targetContribution.toLocaleString()}`;
            document.getElementById('biweeklyGross').textContent = `$${Math.round(biweeklyGross).toLocaleString()}`;
            document.getElementById('annualMatch').textContent = `$${Math.round(employerMatchAmount).toLocaleString()}`;
            document.getElementById('totalIncome').textContent = `$${totalIncome.toLocaleString()}`;
            
            // Update bonus display
            if (bonus > 0 && bonusPeriod > 0) {
                document.getElementById('bonusDisplay').textContent = `$${bonus.toLocaleString()}`;
                document.getElementById('bonusInfo').style.display = 'block';
            } else {
                document.getElementById('bonusDisplay').textContent = 'None';
                document.getElementById('bonusInfo').style.display = 'none';
            }
            
            // Update card amounts
            document.getElementById('frontloadAmount').textContent = `$${targetContribution.toLocaleString()}`;
            document.getElementById('uniformAmount').textContent = `$${targetContribution.toLocaleString()}`;
            
            // Calculate uniform rate
            const uniformRate = (targetContribution / salary) * 100;
            document.getElementById('uniformRate').textContent = `${uniformRate.toFixed(1)}% every paycheck`;
            
            // Show warning for extreme contribution rates
            const warningDiv = document.getElementById('extremeWarning');
            if (frontloadPercent >= 0.75) {
                warningDiv.style.display = 'block';
            } else {
                warningDiv.style.display = 'none';
            }
            
            const frontloadContribution = biweeklyGross * frontloadPercent;
            const maintenanceContribution = biweeklyGross * employerMatchRate;
            
            // Calculate strategy
            let bestSwitchPeriod = 26;
            let bestLastContribution = 0;
            
            // Try each possible switch point
            for (let switchPeriod = 1; switchPeriod <= 26; switchPeriod++) {
                const frontloadPeriods = switchPeriod - 1;
                const maintenancePeriods = 26 - switchPeriod;
                
                let frontloadTotal = frontloadPeriods * frontloadContribution;
                
                // Add bonus if it falls in the frontload period
                if (bonus > 0 && bonusPeriod > 0 && bonusPeriod < switchPeriod) {
                    frontloadTotal += bonus * frontloadPercent;
                }
                
                const maintenanceTotal = maintenancePeriods * maintenanceContribution;
                
                // Add bonus if it falls in the maintenance period
                let bonusContribution = 0;
                if (bonus > 0 && bonusPeriod > 0 && bonusPeriod >= switchPeriod) {
                    bonusContribution = bonus * employerMatchRate;
                }
                
                const remaining = targetContribution - frontloadTotal - maintenanceTotal - bonusContribution;
                
                if (remaining >= 0 && remaining <= frontloadContribution + (bonusPeriod === switchPeriod ? bonus * frontloadPercent : 0)) {
                    bestSwitchPeriod = switchPeriod;
                    bestLastContribution = remaining;
                    break;
                }
            }
            
            // Handle case where frontloading completes early
            if (bestSwitchPeriod === 26 && bestLastContribution === 0) {
                let cumulativeContribution = 0;
                for (let i = 1; i <= 26; i++) {
                    let periodContribution = frontloadContribution;
                    if (bonus > 0 && bonusPeriod === i) {
                        periodContribution += bonus * frontloadPercent;
                    }
                    
                    if (cumulativeContribution + periodContribution >= targetContribution) {
                        bestSwitchPeriod = i + 1;
                        bestLastContribution = targetContribution - cumulativeContribution;
                        break;
                    }
                    cumulativeContribution += periodContribution;
                }
            }
            
            // Update breakdown
            const frontloadPeriods = bestSwitchPeriod - 1;
            const maintenancePeriods = 26 - bestSwitchPeriod;
            
            let breakdownText = `<p><strong>${frontloadPercent * 100}%</strong> for ${frontloadPeriods} pay periods</p>`;
            
            if (bestLastContribution > 0) {
                breakdownText += `<p><strong>$${Math.round(bestLastContribution).toLocaleString()}</strong> for pay period ${bestSwitchPeriod}</p>`;
            }
            
            if (maintenancePeriods > 0) {
                breakdownText += `<p><strong>${employerMatchRate * 100}%</strong> for remaining ${maintenancePeriods} pay periods</p>`;
            } else {
                breakdownText += `<p><strong>0%</strong> for remaining pay periods (goal reached)</p>`;
            }
            
            if (bonus > 0 && bonusPeriod > 0) {
                breakdownText += `<p style="font-size: 0.9em; color: #666;">Includes bonus in pay period ${bonusPeriod}</p>`;
            }
            
            breakdownText += `<p style="font-size: 0.9em; color: #666;">Total: exactly $${targetContribution.toLocaleString()}</p>`;
            
            document.getElementById('frontloadBreakdown').innerHTML = breakdownText;
            
            // Calculate time value benefit
            const avgTimeInMarket = frontloadPercent > 0.5 ? 8 : frontloadPercent > 0.25 ? 4 : 2;
            const timeValueBenefit = Math.round(targetContribution * 0.07 * (avgTimeInMarket / 12));
            document.getElementById('timeValueBenefit').textContent = `$${timeValueBenefit}`;
            
            // Update table
            updateTable(salary, bonus, bonusPeriod, employerMatchRate, frontloadPercent, bestSwitchPeriod, frontloadContribution, maintenanceContribution, bestLastContribution, targetContribution);
        }
        
        function updateTable(salary, bonus, bonusPeriod, employerMatchRate, frontloadPercent, switchPayPeriod, frontloadContribution, maintenanceContribution, lastFrontloadContribution, targetContribution) {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            const biweeklyGross = salary / 26;
            let cumulativeEmployeeContribution = 0;
            let cumulativeTotalContribution = 0;
            
            for (let i = 1; i <= 26; i++) {
                const row = document.createElement('tr');
                const month = months[Math.floor((i - 1) / 2.17)];
                
                // Calculate gross pay for this period (including bonus)
                let grossPay = biweeklyGross;
                if (bonus > 0 && bonusPeriod === i) {
                    grossPay += bonus;
                    row.className = 'bonus-period';
                }
                
                let contributionPercent, yourContribution, rowClass;
                
                // Check if we've already hit the employee contribution limit
                if (cumulativeEmployeeContribution >= targetContribution) {
                    contributionPercent = 0;
                    yourContribution = 0;
                    if (!row.className) rowClass = 'maintenance-phase';
                } else if (i < switchPayPeriod) {
                    // Frontload phase
                    contributionPercent = frontloadPercent;
                    yourContribution = Math.min(grossPay * frontloadPercent, targetContribution - cumulativeEmployeeContribution);
                    if (!row.className) rowClass = 'frontload-phase';
                } else if (i === switchPayPeriod && lastFrontloadContribution > 0) {
                    // Transition paycheck with partial contribution
                    yourContribution = Math.min(lastFrontloadContribution, targetContribution - cumulativeEmployeeContribution);
                    contributionPercent = yourContribution / grossPay;
                    if (!row.className) rowClass = 'frontload-phase';
                } else {
                    // Maintenance phase
                    contributionPercent = employerMatchRate;
                    yourContribution = Math.min(grossPay * employerMatchRate, targetContribution - cumulativeEmployeeContribution);
                    if (!row.className) rowClass = 'maintenance-phase';
                }
                
                const employerMatch = biweeklyGross * employerMatchRate;
                const totalTo401k = yourContribution + employerMatch;
                const takeHome = calculateTakeHome(grossPay, yourContribution);
                
                cumulativeEmployeeContribution += yourContribution;
                cumulativeTotalContribution += totalTo401k;
                
                if (rowClass) {
                    row.className = rowClass;
                }
                
                row.innerHTML = `
                    <td>${i}</td>
                    <td>${month}</td>
                    <td>$${Math.round(grossPay).toLocaleString()}</td>
                    <td>${(contributionPercent * 100).toFixed(1)}%</td>
                    <td>$${Math.round(yourContribution).toLocaleString()}</td>
                    <td>$${Math.round(employerMatch).toLocaleString()}</td>
                    <td>$${Math.round(totalTo401k).toLocaleString()}</td>
                    <td>$${Math.round(takeHome).toLocaleString()}</td>
                    <td>$${Math.round(cumulativeEmployeeContribution).toLocaleString()}</td>
                    <td>$${Math.round(cumulativeTotalContribution).toLocaleString()}</td>
                `;
                
                tableBody.appendChild(row);
            }
        }
        
        // Initialize
        document.getElementById('salary').addEventListener('input', updateStrategy);
        document.getElementById('bonus').addEventListener('input', updateStrategy);
        document.getElementById('bonusPeriod').addEventListener('change', updateStrategy);
        document.getElementById('employerMatch').addEventListener('input', updateStrategy);
        document.getElementById('frontloadPercent').addEventListener('input', updateStrategy);
        document.getElementById('targetContribution').addEventListener('input', updateStrategy);
        updateStrategy();
    </script>
</body>
</html>
